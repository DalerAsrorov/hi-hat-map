(function () {
'use strict';

// Initializing the map
// let mainMap = L.map('mapWrapper').setView([51.505, -0.09], 13);

// L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
//     maxZoom: 19,
//     attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
// }).addTo(mainMap);

var mapLayer = MQ.mapLayer();
var mainMap = void 0;

mainMap = L.map('mapWrapper', {
  layers: mapLayer,
  center: [40.731701, -73.993411],
  zoom: 12
});

L.control.layers({
  'Map': mapLayer,
  'Hybrid': MQ.hybridLayer(),
  'Satellite': MQ.satelliteLayer(),
  'Dark': MQ.darkLayer(),
  'Light': MQ.lightLayer()
}).addTo(mainMap);

var Map = mainMap;

// UI Utils set

function slideToggleCp(targetID, map) {
    var heightSetterID = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'arrowPointerWrapper';
    var cpDefaultHeight = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : "35%";

    var cpNavHeight = document.getElementById(heightSetterID).offsetHeight.toString();
    var cpWrapperHeight = document.getElementById(targetID).offsetHeight.toString();
    var slidingTime = 300;
    var defaultTop = "-15px";

    var $querySearchForm = $('#querySearchForm');
    var $target = $("#" + targetID);
    var $body = $('body');
    var $slideSwitchIcon = $('#slideSwitchIcon');

    if (cpWrapperHeight === cpNavHeight) {
        $body.css({ "overflowY": "auto" });
        $target.animate({ height: cpDefaultHeight }, slidingTime);
        $querySearchForm.animate({
            top: "-15px"
        }, slidingTime);
        $slideSwitchIcon.addClass('glyphicon-menu-down').removeClass('glyphicon-menu-up');
    } else {
        $body.css({ "overflowY": "hidden" });
        $target.animate({ height: cpNavHeight }, slidingTime);
        $querySearchForm.animate({
            top: "-34px"
        }, slidingTime);
        map.invalidateSize();
        $slideSwitchIcon.addClass('glyphicon-menu-up').removeClass('glyphicon-menu-down');
    }
}

function getRequest(url) {
    return new Promise(function (res, rej) {
        $.get(url, function (data, status) {

            if (status === 'success') {
                console.log("Success");
                res(data);
            } else {
                rej("Couldn't get the file.");
            }
        });
    });
}

function getTrendsPath(weid) {
    return window.location.origin + "/api/twitter/trends/" + weid;
}

// Action
window.onload = function (e) {
    e.preventDefault();

    var socket = io.connect('http://localhost:8000/');

    

    $('#toggleSliderBtn').on('click', function (event) {
        console.log('CLICKED');
        slideToggleCp('controlPanelWrapper', Map);
    });

    // let input = document.getElementById('pac-input')
    new L.Control.GPlaceAutocomplete({
        position: 'topright',
        callback: function callback(location) {
            // object of google place is given
            console.log('Location given:', location);
            Map.panTo(location);
        }
    }).addTo(Map);

    socket.on('tweet', function (tweet) {
        columnsonsole.log('Tweet: ', tweet);
    });

    // Testing area
    getRequest(getTrendsPath(1)).then(function (data) {
        console.log('Data', data);
    }).catch(function (err) {
        console.log("Error request", err);
    });
};

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzIjpbIi4uL2pzL21hcC5qcyIsIi4uL2pzL3VpLmpzIiwiLi4vanMvcmVxdWVzdC5qcyIsIi4uL2pzL3V0aWxzLmpzIiwiLi4vanMvbWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vIEluaXRpYWxpemluZyB0aGUgbWFwXG4vLyBsZXQgbWFpbk1hcCA9IEwubWFwKCdtYXBXcmFwcGVyJykuc2V0VmlldyhbNTEuNTA1LCAtMC4wOV0sIDEzKTtcblxuLy8gTC50aWxlTGF5ZXIoJ2h0dHA6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLCB7XG4vLyAgICAgbWF4Wm9vbTogMTksXG4vLyAgICAgYXR0cmlidXRpb246ICcmY29weTsgPGEgaHJlZj1cImh0dHA6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCI+T3BlblN0cmVldE1hcDwvYT4nXG4vLyB9KS5hZGRUbyhtYWluTWFwKTtcblxubGV0IG1hcExheWVyID0gTVEubWFwTGF5ZXIoKSwgbWFpbk1hcDtcblxubWFpbk1hcCA9IEwubWFwKCdtYXBXcmFwcGVyJywge1xuICAgIGxheWVyczogbWFwTGF5ZXIsXG4gICAgY2VudGVyOiBbIDQwLjczMTcwMSwgLTczLjk5MzQxMSBdLFxuICAgIHpvb206IDEyXG59KTtcblxuTC5jb250cm9sLmxheWVycyh7XG4gICdNYXAnOiBtYXBMYXllcixcbiAgJ0h5YnJpZCc6IE1RLmh5YnJpZExheWVyKCksXG4gICdTYXRlbGxpdGUnOiBNUS5zYXRlbGxpdGVMYXllcigpLFxuICAnRGFyayc6IE1RLmRhcmtMYXllcigpLFxuICAnTGlnaHQnOiBNUS5saWdodExheWVyKClcbn0pLmFkZFRvKG1haW5NYXApO1xuXG5leHBvcnQgZGVmYXVsdCBtYWluTWFwOyIsIi8vIFVJIFV0aWxzIHNldFxuXG5leHBvcnQgZnVuY3Rpb24gc2xpZGVUb2dnbGVDcCh0YXJnZXRJRCwgbWFwLCBoZWlnaHRTZXR0ZXJJRCA9ICdhcnJvd1BvaW50ZXJXcmFwcGVyJywgY3BEZWZhdWx0SGVpZ2h0ID0gXCIzNSVcIiwgLi4ucmVzdCkge1xuICAgIGNvbnN0IGNwTmF2SGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaGVpZ2h0U2V0dGVySUQpLm9mZnNldEhlaWdodC50b1N0cmluZygpO1xuICAgIGNvbnN0IGNwV3JhcHBlckhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldElEKS5vZmZzZXRIZWlnaHQudG9TdHJpbmcoKTtcbiAgICBjb25zdCBzbGlkaW5nVGltZSA9IDMwMDtcbiAgICBjb25zdCBkZWZhdWx0VG9wID0gXCItMTVweFwiO1xuXG4gICAgY29uc3QgJHF1ZXJ5U2VhcmNoRm9ybSA9ICQoJyNxdWVyeVNlYXJjaEZvcm0nKTtcbiAgICBjb25zdCAkdGFyZ2V0ID0gJChgIyR7dGFyZ2V0SUR9YCk7XG4gICAgY29uc3QgJGJvZHkgPSAkKCdib2R5Jyk7XG4gICAgY29uc3QgJHNsaWRlU3dpdGNoSWNvbiA9ICQoJyNzbGlkZVN3aXRjaEljb24nKTtcblxuICAgIGlmKGNwV3JhcHBlckhlaWdodCA9PT0gY3BOYXZIZWlnaHQpIHtcbiAgICAgICAgJGJvZHkuY3NzKHtcIm92ZXJmbG93WVwiOiBcImF1dG9cIn0pO1xuICAgICAgICAkdGFyZ2V0LmFuaW1hdGUoe2hlaWdodDogY3BEZWZhdWx0SGVpZ2h0fSwgc2xpZGluZ1RpbWUpO1xuICAgICAgICAkcXVlcnlTZWFyY2hGb3JtLmFuaW1hdGUoe1xuICAgICAgICAgICAgdG9wOiBcIi0xNXB4XCJcbiAgICAgICAgfSwgc2xpZGluZ1RpbWUpO1xuICAgICAgICAkc2xpZGVTd2l0Y2hJY29uLmFkZENsYXNzKCdnbHlwaGljb24tbWVudS1kb3duJykucmVtb3ZlQ2xhc3MoJ2dseXBoaWNvbi1tZW51LXVwJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAkYm9keS5jc3Moe1wib3ZlcmZsb3dZXCI6IFwiaGlkZGVuXCJ9KTtcbiAgICAgICAgJHRhcmdldC5hbmltYXRlKHtoZWlnaHQ6IGNwTmF2SGVpZ2h0fSwgc2xpZGluZ1RpbWUpO1xuICAgICAgICAkcXVlcnlTZWFyY2hGb3JtLmFuaW1hdGUoe1xuICAgICAgICAgICAgdG9wOiBcIi0zNHB4XCJcbiAgICAgICAgfSwgc2xpZGluZ1RpbWUpO1xuICAgICAgICBtYXAuaW52YWxpZGF0ZVNpemUoKTtcbiAgICAgICAgJHNsaWRlU3dpdGNoSWNvbi5hZGRDbGFzcygnZ2x5cGhpY29uLW1lbnUtdXAnKS5yZW1vdmVDbGFzcygnZ2x5cGhpY29uLW1lbnUtZG93bicpO1xuICAgIH1cbn07IiwiXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZXF1ZXN0KHVybCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcbiAgICAgICAgJC5nZXQodXJsLCAoZGF0YSwgc3RhdHVzKSA9PiB7XG5cbiAgICAgICAgICAgIGlmKHN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTdWNjZXNzXCIpO1xuICAgICAgICAgICAgICAgIHJlcyhkYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVqKFwiQ291bGRuJ3QgZ2V0IHRoZSBmaWxlLlwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICB9KTtcbn07IiwiXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmVuZHNQYXRoKHdlaWQpIHtcbiAgICByZXR1cm4gYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0vYXBpL3R3aXR0ZXIvdHJlbmRzLyR7d2VpZH1gO1xufSIsImltcG9ydCBNYXAgZnJvbSAnLi9tYXAuanMnO1xuaW1wb3J0ICogYXMgdWkgZnJvbSAnLi91aS5qcyc7XG5pbXBvcnQgKiBhcyBSZXF1ZXN0IGZyb20gJy4vcmVxdWVzdC5qcyc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICcuL3V0aWxzLmpzJztcblxuLy8gQWN0aW9uXG53aW5kb3cub25sb2FkID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgc29ja2V0ID0gaW8uY29ubmVjdCgnaHR0cDovL2xvY2FsaG9zdDo4MDAwLycpO1xuXG4gICAgZnVuY3Rpb24gZ2V0VHdlZXRzKGV2ZW50KSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBSZWFkeTogJHtldmVudH1gKTtcbiAgICAgICAgc29ja2V0LmVtaXQoJ3RvcGljJywgXCJ0cnVtcFwiKTtcbiAgICB9O1xuXG4gICAgJChgI3RvZ2dsZVNsaWRlckJ0bmApLm9uKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnQ0xJQ0tFRCcpO1xuICAgICAgICB1aS5zbGlkZVRvZ2dsZUNwKCdjb250cm9sUGFuZWxXcmFwcGVyJywgTWFwKTtcbiAgICB9KTtcblxuICAgIC8vIGxldCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWMtaW5wdXQnKVxuICAgIG5ldyBMLkNvbnRyb2wuR1BsYWNlQXV0b2NvbXBsZXRlKHtcbiAgICAgICAgcG9zaXRpb246ICd0b3ByaWdodCcsXG4gICAgICAgIGNhbGxiYWNrOiAobG9jYXRpb24pID0+IHtcbiAgICAgICAgICAgIC8vIG9iamVjdCBvZiBnb29nbGUgcGxhY2UgaXMgZ2l2ZW5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2NhdGlvbiBnaXZlbjonLCBsb2NhdGlvbik7XG4gICAgICAgICAgICBNYXAucGFuVG8obG9jYXRpb24pO1xuXG4gICAgICAgIH1cbiAgICB9KS5hZGRUbyhNYXApO1xuXG4gICAgc29ja2V0Lm9uKCd0d2VldCcsICh0d2VldCkgPT4ge1xuICAgICAgICBjb2x1bW5zb25zb2xlLmxvZygnVHdlZXQ6ICcsIHR3ZWV0KTtcbiAgICB9KTtcblxuXG4gICAgLy8gVGVzdGluZyBhcmVhXG4gICAgUmVxdWVzdC5nZXRSZXF1ZXN0KFV0aWxzLmdldFRyZW5kc1BhdGgoMSkpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ0RhdGEnLCBkYXRhKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgcmVxdWVzdFwiLCBlcnIpO1xuICAgIH0pO1xufTtcblxuXG5cbiJdLCJuYW1lcyI6WyJtYXBMYXllciIsIk1RIiwibWFpbk1hcCIsIkwiLCJtYXAiLCJjb250cm9sIiwibGF5ZXJzIiwiaHlicmlkTGF5ZXIiLCJzYXRlbGxpdGVMYXllciIsImRhcmtMYXllciIsImxpZ2h0TGF5ZXIiLCJhZGRUbyIsInNsaWRlVG9nZ2xlQ3AiLCJ0YXJnZXRJRCIsImhlaWdodFNldHRlcklEIiwiY3BEZWZhdWx0SGVpZ2h0IiwiY3BOYXZIZWlnaHQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwib2Zmc2V0SGVpZ2h0IiwidG9TdHJpbmciLCJjcFdyYXBwZXJIZWlnaHQiLCJzbGlkaW5nVGltZSIsImRlZmF1bHRUb3AiLCIkcXVlcnlTZWFyY2hGb3JtIiwiJCIsIiR0YXJnZXQiLCIkYm9keSIsIiRzbGlkZVN3aXRjaEljb24iLCJjc3MiLCJhbmltYXRlIiwiaGVpZ2h0IiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImludmFsaWRhdGVTaXplIiwiZ2V0UmVxdWVzdCIsInVybCIsIlByb21pc2UiLCJyZXMiLCJyZWoiLCJnZXQiLCJkYXRhIiwic3RhdHVzIiwibG9nIiwiZ2V0VHJlbmRzUGF0aCIsIndlaWQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsIm9yaWdpbiIsIm9ubG9hZCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInNvY2tldCIsImlvIiwiY29ubmVjdCIsIm9uIiwiZXZlbnQiLCJNYXAiLCJDb250cm9sIiwiR1BsYWNlQXV0b2NvbXBsZXRlIiwicGFuVG8iLCJ0d2VldCIsIlV0aWxzIiwidGhlbiIsImNhdGNoIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7QUFDQTs7Ozs7Ozs7QUFRQSxJQUFJQSxXQUFXQyxH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
